    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>HCM Chat App</title>
        <!-- Bootstrap 5 CSS -->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        />

        <style>
        #chat-box {
            height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            padding: 10px;
            background: #f8f9fa;
            scrollbar-width: none; /* Firefox */
        }

        #chat-box::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }

        .message {
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 1rem;
            max-width: 75%;
            word-wrap: break-word;
        }

        .message.user {
            background: #0d6efd;
            color: #fff;
            margin-left: auto;
            text-align: right;
        }

        .message.other {
            background: #e9ecef;
            color: #000;
            margin-right: auto;
        }

        .hideContent {
            display: none !important;
        }
        </style>
    </head>

    <body class="bg-light">
        <div class="container py-4">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="fw-bold">ðŸ’¬ HCM Chat App</h2>
            <div>
            <div id="userBtn" class="d-inline-block">
                <a href="signup" class="btn btn-outline-primary btn-sm">Sign Up</a>
                <a href="login" class="btn btn-outline-success btn-sm">Log In</a>
            </div>
            <button
                id="logout"
                onclick="logout()"
                class="btn btn-danger btn-sm ms-2"
            >
                <span id="dipUser"></span> <small>(Logout)</small>
            </button>
            </div>
        </div>

        <!-- Chat Section -->
        <div id="chat-box" class="mb-3"></div>

        <!-- Input Section -->
        <div class="input-group">
            <input
            id="message-input"
            type="text"
            class="form-control"
            placeholder="Type your message..."
            />
            <button id="send-btn" class="btn btn-primary">Send</button>
        </div>
        </div>

        <!-- Bootstrap Bundle JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.min.js"></script>

        <script>
        const socket = io.connect(
            "http://" + document.domain + ":" + location.port
        );

        const dipUser = document.getElementById("dipUser");
        const userString = localStorage.getItem("user");
        const userObject = JSON.parse(userString);

        // Function to display messages
        function displayMessage(username, message) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("message");

            if (userObject && username === userObject.username) {
            messageDiv.classList.add("user");
            messageDiv.innerText = `${message}`;
            } else {
            messageDiv.classList.add("other");
            messageDiv.innerText = `${username}: ${message}`;
            }

            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight; // Auto-scroll to bottom
        }

        // Fetch chat history
        fetch("/messages")
            .then((response) => response.json())
            .then((data) => {
            data.forEach((msg) => {
                displayMessage(msg.username, msg.message);
            });
            });

        // Send message function
        function sendMessage() {
            const messageInput = document.getElementById("message-input");
            const message = messageInput.value.trim();

            if (message && userObject && userObject.username) {
            const messageData = {
                username: userObject.username,
                message: message,
            };
            socket.emit("chat_message", messageData);
            messageInput.value = "";
            messageInput.focus();
            }
        }

        // Send on button click
        document.getElementById("send-btn").onclick = sendMessage;

        // Send on Enter key press
        document
            .getElementById("message-input")
            .addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                event.preventDefault(); // prevent new line
                sendMessage();
            }
            });

        // Receive messages
        socket.on("chat_message", function (data) {
            displayMessage(data.username, data.message);
        });

        function disUser() {
            if (userObject && userObject.username) {
            dipUser.innerText = userObject.username;
            document.getElementById("userBtn").classList.add("hideContent");
            } else {
            document.getElementById("userBtn").classList.remove("hideContent");
            document.getElementById("logout").style.display = "none";
            }
        }
        disUser();

        function logout() {
            localStorage.removeItem("user");
            window.location.href = "/login";
        }
        </script>
    </body>
    </html>